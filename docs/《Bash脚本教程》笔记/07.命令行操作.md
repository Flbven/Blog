---
title: 命令行操作
date: 2020-12-12 11:49:16
permalink: /pages/0796ba76b4b55367
categories:
  - 《Bash脚本教程》笔记
tags:
  - Bash
author:
  name: fubowen
  link: https://github.com/Flbven
---

# 命令行操作

## 快捷键

### 光标移动

- `Ctrl + a`：移到行首。
- `Ctrl + b`：向行首移动一个字符，与左箭头作用相同。
- `Ctrl + e`：移到行尾。
- `Ctrl + f`：向行尾移动一个字符，与右箭头作用相同。
- `Alt + f`：移动到当前单词的词尾。
- `Alt + b`：移动到当前单词的词首。

### 清除屏幕

- `Ctrl + l`：清除屏幕，并将当前行移到屏幕第一行

### 编辑命令行

- `Ctrl + d`：删除光标位置的字符（delete）。
- `Ctrl + w`：删除光标前面的单词。
- `Ctrl + t`：光标位置的字符与它前面一位的字符交换位置（transpose）。
- `Alt + t`：光标位置的词与它前面一位的词交换位置（transpose）。
- `Alt + l`：将光标位置至词尾转为小写（lowercase）。
- `Alt + u`：将光标位置至词尾转为大写（uppercase）。

### 剪切和粘贴

- `Ctrl + k`：剪切光标位置到行尾的文本。
- `Ctrl + u`：剪切光标位置到行首的文本。
- `Alt + d`：剪切光标位置到词尾的文本。
- `Alt + Backspace`：剪切光标位置到词首的文本。
- `Ctrl + y`：在光标位置粘贴文本。

### 自动补全

- `Tab`：完成自动补全。
- `Alt + ?`：列出可能的补全，与连按两次 Tab 键作用相同。
- `Alt + /`：尝试文件路径补全。
- `Ctrl + x /`：先按`Ctrl + x`，再按`/`，等同于`Alt + ?`，列出可能的文件路径补全。
- `Alt + !`：命令补全。
- `Ctrl + x !`：先按`Ctrl + x`，再按`!`，等同于`Alt + !`，命令补全。
- `Alt + ~`：用户名补全。
- `Ctrl + x ~`：先按`Ctrl + x`，再按`~`，等同于`Alt + ~`，用户名补全。
- `Alt + $`：变量名补全。
- `Ctrl + x $`：先按`Ctrl + x`，再按`$`，等同于`Alt + $`，变量名补全。
- `Alt + @`：主机名补全。
- `Ctrl + x @`：先按`Ctrl + x`，再按`@`，等同于`Alt + @`，主机名补全。
- `Alt + *`：在命令行一次性插入所有可能的补全。
- `Alt + Tab`：尝试用`.bash_history`里面以前执行命令，进行补全。

### 操作历史

- `Ctrl + p`：显示上一个命令，与向上箭头效果相同（previous）。
- `Ctrl + n`：显示下一个命令，与向下箭头效果相同（next）。
- `Alt + <`：显示第一个命令。
- `Alt + >`：显示最后一个命令，即当前的命令。
- `Ctrl + o`：执行历史文件里面的当前条目，并自动显示下一条命令。这对重复执行某个序列的命令很有帮助。

感叹号`!`的快捷键如下。

- `!!`：执行上一个命令。
- `!n`：`n`为数字，执行历史文件里面行号为`n`的命令。
- `!-n`：执行当前命令之前`n`条的命令。
- `!string`：执行最近一个以指定字符串`string`开头的命令。
- `!?string`：执行最近一条包含字符串`string`的命令。
- `!$`：代表上一个命令的最后一个参数。
- `!*`：代表上一个命令的所有参数，即除了命令以外的所有部分。
- `^string1^string2`：执行最近一条包含`string1`的命令，将其替换成`string2`。

### 其他

- `Ctrl + j`：等同于回车键（LINEFEED）。
- `Ctrl + m`：等同于回车键（CARRIAGE RETURN）。
- `Ctrl + o`：等同于回车键，并展示操作历史的下一个命令。
- `Ctrl + v`：将下一个输入的特殊字符变成字面量，比如回车变成`^M`。
- `Ctrl + [`：等同于 ESC。
- `Alt + .`：插入上一个命令的最后一个词。
- `Alt + _`：等同于`Alt + .`。



## 目录堆栈

### cd -

Bash在默认情况下会记忆用户上一次进入过的目录，`cd -`可以返回前一次的目录。

```bash
# /shell
$ cd home

# 回到/shell
$ cd .
```

### pushd，popd

`pushd`和`popd`用来需要记忆多重目录的场景，他们用来操作目录堆栈。

`pushd`命令在进入目录的同时，会将该目录放入堆栈。

```bash
$ pushd home
/shell/home /shell
```

第一次使用`pushd`命令时会将当前目录先放入堆栈，然后将进入的目录放进堆栈，以后每一次使用`pushd`都会将进入的目录放到堆栈顶部。

`popd`命令不带有参数时，会取出堆栈的顶部记录并进入。

命令参数：

**（1）-n 参数**

表示仅操作堆栈，不改变目录。

```bash
$ popd -n
```

**（2）整数参数**

```bash
# 从栈顶算起的3号目录（从0开始），移动到栈顶
$ pushd +3

# 从栈底算起的3号目录（从0开始），移动到栈顶
$ pushd -3

# 删除从栈顶算起的3号目录（从0开始）
$ popd +3

# 删除从栈底算起的3号目录（从0开始）
$ popd -3
```



### dirs命令

显示目录堆栈的内容。

参数：

- `-c`：清空目录栈。
- `-l`：用户主目录不显示波浪号前缀，而打印完整的目录。
- `-p`：每行一个条目打印目录栈，默认是打印在一行。
- `-v`：每行一个条目，每个条目之前显示位置编号（从0开始）。
- `+N`：`N`为整数，表示显示堆顶算起的第 N 个目录，从零开始。
- `-N`：`N`为整数，表示显示堆底算起的第 N 个目录，从零开始。

